(this["webpackJsonpnc-news-frontend"]=this["webpackJsonpnc-news-frontend"]||[]).push([[0],{19:function(e,t,c){},26:function(e,t,c){},27:function(e,t,c){},47:function(e,t,c){},48:function(e,t,c){},49:function(e,t,c){},50:function(e,t,c){},51:function(e,t,c){"use strict";c.r(t);var n=c(1),s=c.n(n),a=c(20),r=c.n(a),i=c(6),o=(c(26),c(3)),j=(c(27),c(0));function u(){return Object(j.jsx)("footer",{id:"Footer",children:Object(j.jsx)("h3",{id:"FooterH3",children:" An App by Scott Wears"})})}function l(e){var t=e.topics;return Object(j.jsx)("nav",{id:"Nav",children:Object(j.jsxs)("ul",{id:"navList",children:[Object(j.jsx)("li",{children:Object(j.jsx)(i.b,{to:"/",className:"navLink",children:"Home"})}),Object(j.jsx)("li",{children:Object(j.jsx)(i.b,{className:"navLink",to:"/users",children:"Users"})}),t.map((function(e){var t=e.slug;return Object(j.jsx)("li",{className:"navLi",children:Object(j.jsx)(i.b,{className:"navLink",to:"/topic/".concat(t),children:t})},t)}))]})})}function b(e){var t=e.topics,c=e.setShowMenu;return Object(j.jsxs)("div",{className:"Menu",children:[Object(j.jsx)("span",{id:"closeMenu",onClick:function(){c(!1)},children:"X"}),Object(j.jsxs)("ul",{id:"menuList",children:[Object(j.jsx)("li",{children:Object(j.jsx)(i.b,{className:"navLink",to:"/",children:"Home"})}),Object(j.jsx)("li",{children:Object(j.jsx)(i.b,{className:"navLink",to:"/users",children:"Users"})}),t.map((function(e){var t=e.slug;return Object(j.jsx)("li",{className:"navLi",children:Object(j.jsx)(i.b,{className:"navLink",to:"/topic/".concat(t),children:t})},t)}))]})]})}var d=c(21),O=c.n(d).a.create({baseURL:"https://continuum-news.herokuapp.com/api"}),m=function(e,t){return O.get("/articles",{params:{sort_by:e,topic:t}}).then((function(e){return e.data}))},h=(c(47),Object(n.createContext)());function x(){var e=Object(n.useState)(!1),t=Object(o.a)(e,2),c=t[0],s=t[1],a=Object(n.useState)([]),r=Object(o.a)(a,2),i=r[0],u=r[1],d=Object(n.useContext)(h).user;return Object(n.useEffect)((function(){return O.get("/topics").then((function(e){return e.data})).then((function(e){var t=e.topics;u(t)})),function(){}}),[]),!0===c?(setTimeout((function(){s(!1)}),2e3),Object(j.jsxs)("header",{id:"Header",children:[Object(j.jsx)("h1",{id:"HeaderH1",children:"Northcoders News"}),Object(j.jsxs)("p",{className:"welcomeUser",children:["Welcome : ",d]}),Object(j.jsx)(b,{topics:i,setShowMenu:s})]})):Object(j.jsxs)("header",{id:"Header",children:[Object(j.jsx)("h1",{id:"HeaderH1",children:"Northcoders News"}),Object(j.jsxs)("p",{className:"welcomeUser",children:["Welcome : ",d]}),Object(j.jsx)("span",{onClick:function(){s(!0)},id:"menuIcon",children:"Menu"}),Object(j.jsx)(l,{topics:i})]})}var f=c(2);function v(e){var t=e.article,c=t.title,n=t.author,s=t.body,a=t.votes,r=t.article_id,o=t.topic,u=t.comment_count;return Object(j.jsxs)("div",{className:"ArticleCard",children:[Object(j.jsxs)("h3",{className:"articleTitle",children:[c,Object(j.jsxs)("span",{className:"articleTopic",children:[" ~ ",o]})]}),Object(j.jsxs)("p",{className:"articleAuthor",children:[n," ",u]}),Object(j.jsx)("p",{className:"articleBody textOverflowOff",children:s}),Object(j.jsxs)("div",{className:"votes",children:[Object(j.jsxs)("span",{className:"articleVotes",children:["Votes: ",a]}),Object(j.jsx)(i.b,{to:"/articles/".concat(r),className:"articleButton",children:"Read more..."})]})]})}function p(){var e=Object(n.useState)([]),t=Object(o.a)(e,2),c=t[0],s=t[1],a=Object(n.useState)("created_at"),r=Object(o.a)(a,2),i=r[0],u=r[1];return Object(n.useEffect)((function(){m(i).then((function(e){var t=e.articles;s(t)}))}),[i]),Object(j.jsxs)("div",{children:[Object(j.jsxs)("div",{className:"ArticleSort",children:[Object(j.jsx)("p",{children:"sort by:.."}),Object(j.jsx)("br",{}),["created_at","votes","title","article_id","topic","author","comment_count"].map((function(e){return Object(j.jsx)("button",{onClick:function(){u(e)},children:e},e)}))]}),Object(j.jsx)("div",{className:"ArticleList",children:c.map((function(e){return Object(j.jsx)(v,{article:e},e.article_id)}))})]})}c(48),c(49);function N(e){var t=e.comment_id,c=(e.votes,Object(n.useState)(0)),s=Object(o.a)(c,2),a=s[0],r=s[1],i=Object(n.useState)(!1),u=Object(o.a)(i,2),l=u[0],b=u[1],d=Object(n.useState)("Vote"),m=Object(o.a)(d,2),h=m[0],x=m[1],f=function(e){var t;r((function(e){return a+1})),t=e,O.patch("/comments/".concat(t),{inc_votes:1}).then((function(e){return e}))};return Object(j.jsx)("div",{children:Object(j.jsx)("button",{className:"singlearticleButton",onClick:function(){l||(f(t),b(!0),x("Voted"))},children:h})})}function g(e){var t=e.comment,c=Object(n.useContext)(h).user,s=t.comment_id,a=function(e){!function(e){O.delete("/comments/".concat(e))}(e)};return Object(j.jsxs)("div",{className:"CommentCard",children:[Object(j.jsx)("p",{className:"commentBody",children:t.body}),Object(j.jsx)("p",{className:"commentAuthor",children:t.author}),Object(j.jsxs)("div",{className:"commentsVoteSection",children:[Object(j.jsxs)("p",{className:"commentVotes",children:["Votes: ",t.votes]}),Object(j.jsx)(N,{votes:t.votes,comment_id:t.comment_id})]}),Object(j.jsx)("button",{className:c===t.author?"commentButton":"disabled commentButton",onClick:function(){a(s)},children:"delete"})]})}function S(e){var t=e.id,c=Object(n.useState)([]),s=Object(o.a)(c,2),a=s[0],r=s[1],i=Object(n.useState)("created_at"),u=Object(o.a)(i,2);u[0],u[1];return Object(n.useEffect)((function(){var e=!0;return function(e){return O.get("/articles/".concat(e,"/comments")).then((function(e){return e.data.comments}))}(t).then((function(t){e&&r(t)})),function(){e=!1}})),Object(j.jsx)("section",{children:Object(j.jsx)("div",{className:"CommentsContainer",children:a.map((function(e){return Object(j.jsx)(g,{comment:e},e.comment_id)}))})})}c(50);var _=c.p+"static/media/404.2bd226ef.gif";function C(e){e.error;return Object(j.jsxs)("main",{className:"errorContainer",children:[Object(j.jsx)("p",{className:"errorStatus",children:"404"}),Object(j.jsx)("p",{className:"errorMsg",children:"Oh no did you take a wrong turn"}),Object(j.jsx)("img",{className:"gif",src:_,alt:"a funny gif"})]})}function k(e){var t=Object(n.useState)(""),c=Object(o.a)(t,2),s=c[0],a=c[1],r=Object(n.useContext)(h).user;return Object(j.jsxs)("form",{id:"AddCommentForm",onSubmit:function(t){t.preventDefault();var c=t.target[0].value,n={username:r,body:c};(function(e,t){return O.post("/articles/".concat(e,"/comments"),t)})(e.id,n).then(t.target[0].value="")},children:[Object(j.jsx)("label",{htmlFor:"comment",children:"comment:"}),Object(j.jsx)("input",{required:!0,id:"commentInput",name:"comment",type:"text",value:s,onChange:function(e){a(e.target.value)}}),Object(j.jsx)("button",{id:"addCommentBtn",className:"commentButton",type:"submit",value:"Submit",children:"Add Comment"})]})}function y(e){var t=e.article_id,c=e.votes,s=Object(n.useState)(0),a=Object(o.a)(s,2),r=a[0],i=a[1],u=Object(n.useState)(!1),l=Object(o.a)(u,2),b=l[0],d=l[1],m=Object(n.useState)("Vote"),h=Object(o.a)(m,2),x=h[0],f=h[1],v=function(e){var t;i((function(e){return e+1})),t=e,O.patch("/articles/".concat(t),{inc_votes:1}).then((function(e){return e}))};return Object(j.jsxs)("div",{children:[Object(j.jsxs)("span",{className:"singlearticleVotes mr1",children:["Votes: ",c+r]}),Object(j.jsx)("button",{className:"singlearticleButton",onClick:function(){b||(v(t),d(!0),f("Voted"))},children:x})]})}function w(){var e=Object(n.useState)({}),t=Object(o.a)(e,2),c=t[0],s=t[1],a=c.title,r=c.body,i=c.votes,u=c.author,l=c.article_id,b=Object(n.useState)(null),d=Object(o.a)(b,2),m=d[0],h=d[1],x=Object(f.g)().id;return Object(n.useEffect)((function(){(function(e){return O.get("/articles/".concat(e)).then((function(e){return e.data.articles[0]}))})(x).then((function(e){s(e)})).catch((function(e){h({status:404,msg:"Oh no did you take a wrong turn"})}))}),[x]),null!==m?Object(j.jsx)(C,{error:m}):Object(j.jsxs)("div",{children:[Object(j.jsxs)("div",{className:"singlearticle",children:[Object(j.jsx)("h4",{className:"singlearticleHeading",children:a}),Object(j.jsx)("p",{className:"singlearticleAuthor",children:u}),Object(j.jsx)("p",{className:"singlearticleBody",children:r}),Object(j.jsx)("div",{className:"sAVotesContainerer",children:Object(j.jsx)(y,{votes:i,article_id:l})}),Object(j.jsx)(k,{id:x})]}),Object(j.jsx)(S,{id:x,author:u},l+Math.random())]})}function A(){var e=Object(f.g)().topic,t=Object(n.useState)("created_at"),c=Object(o.a)(t,2),s=c[0],a=c[1],r=Object(n.useState)([]),i=Object(o.a)(r,2),u=i[0],l=i[1],b=Object(n.useState)(null),d=Object(o.a)(b,2),O=d[0],h=d[1];return Object(n.useEffect)((function(){m(s,e).then((function(e){var t=e.articles;l(t)})).catch((function(e){404===e.response.status&&h({status:404,msg:"Oh no did you take a wrong turn"})}))}),[e,s]),null!==O?Object(j.jsx)(C,{error:O}):Object(j.jsxs)("main",{children:[Object(j.jsxs)("div",{className:"ArticleSort",children:[Object(j.jsx)("p",{children:"sort by:.."}),Object(j.jsx)("br",{}),["created_at","votes","title","article_id","topic","author","comment_count"].map((function(e){return Object(j.jsx)("button",{onClick:function(){a(e)},children:e},e)}))]}),Object(j.jsx)("section",{id:"TopicList",className:"container",children:u.map((function(e){return Object(j.jsx)(v,{article:e},e.article_id)}))})]})}c(19);function L(e){var t=e.user,c=t.name,n=t.username,s=t.avatar_url,a="avatar image for ".concat(n);return Object(j.jsxs)("div",{className:"UserProfile",children:[Object(j.jsx)("img",{className:"userAvatar",src:s,alt:a}),Object(j.jsx)("h4",{className:"userName",children:n}),Object(j.jsx)("p",{className:"userRealName",children:c})]})}function V(){var e=Object(n.useState)([]),t=Object(o.a)(e,2),c=t[0],s=t[1];return Object(n.useEffect)((function(){O.get("/users").then((function(e){return e.data.users})).then((function(e){s(e)}))}),[]),Object(j.jsx)("div",{className:"UserContainer",children:c.map((function(e){return Object(j.jsx)(L,{user:e},e.username)}))})}var B=function(){var e=Object(n.useState)("grumpy19"),t=Object(o.a)(e,2),c=t[0],s=t[1];return Object(j.jsx)(h.Provider,{value:{user:c,setUser:s},children:Object(j.jsxs)("div",{className:"App",children:[Object(j.jsx)(x,{}),Object(j.jsxs)(f.c,{children:[Object(j.jsx)(f.a,{path:"/*",element:Object(j.jsx)(C,{})}),Object(j.jsx)(f.a,{exact:!0,path:"/",element:Object(j.jsx)(p,{})}),Object(j.jsx)(f.a,{exact:!0,path:"/articles",element:Object(j.jsx)(p,{})}),Object(j.jsx)(f.a,{path:"/articles/:id",element:Object(j.jsx)(w,{})}),Object(j.jsx)(f.a,{path:"/topic/:topic",element:Object(j.jsx)(A,{})}),Object(j.jsx)(f.a,{path:"/users",element:Object(j.jsx)(V,{})})]}),Object(j.jsx)(u,{})]})})};r.a.render(Object(j.jsx)(s.a.StrictMode,{children:Object(j.jsx)(i.a,{children:Object(j.jsx)(B,{})})}),document.getElementById("root"))}},[[51,1,2]]]);
//# sourceMappingURL=main.52d81c3c.chunk.js.map